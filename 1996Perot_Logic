function createEnding(engine, results) {

    const playerId = engine.getPlayerCandidateController().getId();

    // I am defining some endings below. Note I have to check who the player played as first in this scenario.
    // You could also add more slides to have endings with pages

    // If you played as Gramm
    if(playerId == 77) {
        if(engine.playerWonEv(results)) { //Gramm win
        engine.setNewMusic([{
    displayName: "Peter Gabriel- Steam",
    imageUrl: "https://i.imgur.com/sahSH55.jpeg",
    url: "https://file.garden/Z7qfmQZIZjO_xV5N/SpotiDown.App%20-%20Steam%20-%20Live%20-%20Peter%20Gabriel.mp3",
  },
]);

        return {
            slides: [
                    {
                        endingHeader: "Congratulations! You have won the 2016 election.",
                        imageUrl: "https://i.imgur.com/PZ4LsR6.jpeg",
                        endingText: "<p>In spite of a hard-fought challenge from Hillary Clinton, you have shocked the world with your election victory.</p><p>On the political front, you have the bully pulpit in your favor, but support in Congress in uncertain. Will you govern as a more traditional conservative, or will you make a break from orthodoxy?</p>"
                } 
            ]
            }
        }
else if(engine.isDeadlock(results)) { //Gramm deadlock
        engine.setNewMusic([
  {
    displayName: "Nirvana- The Man Who Sold The World",
    imageUrl: "https://i.imgur.com/lJsxGWS.jpeg",
    url: "https://file.garden/Z7qfmQZIZjO_xV5N/SoldTheWorldNirvana.mp3",
  },
]);

        return {
            slides: [
                {
                    endingHeader: "Gramm deadlock",
                    imageUrl: "https://i.imgur.com/6n7Wno1.jpeg",
                    endingText: "<p>They've done it, Scoop says. The bastards - the devil Dixiecrats - they've deadlocked the election. This is a crisis, Scoop says.</p><p>Dad looks more like the devil himself. His small, beady eyes, like tiny scorching suns, locked on you. You're not sure what he's more angry at - you, Nixon, or Jack. Maybe himself.</p><p>Jack is silent. It must feel excruciating - so, so close, but so, so far.</p><p>Democrats hold the House, but will Southern delegations fall behind? After Jack's campaign? Hardly. Will the Senators fall behind Scoop? Maybe. You consider calling Johnson, but only for a moment. For some reason, you feel that he will not be of much help.</p><p>It's going to be a long, cold month.</p>"
                }  
            ]
            }
        }

    
        else { // Gramm loss
        engine.setNewMusic([{ 
    displayName: "Aden- DC Song",
    imageUrl: "https://i.imgur.com/AldAHlH.jpeg",
    url: "https://file.garden/Z7qfmQZIZjO_xV5N/DC%20Song.mp3",
  },
]);

        return {
            slides: [
                    {
                        endingHeader: "Sorry! You have lost the 2016 election.",
                        imageUrl: "https://i.imgur.com/l1CM6j2.png",
                        endingText: "<p>Many of your supporters are despondent that you have faltered to the likes of Hillary Clinton. Republicans in general believe this was a very winnable election, and are enraged that you came in to blow it. Luckily, there are any number of ways for you to take advantage of your newfound exposure. One rumor even has you founding a television station to profit from the aggrieved sensibilities of your followers. The future is in your hands.</p>"
                  }
            ]
            }
        }
    }
    // If you played as Gore
    else if(playerId == 78) {
        if(engine.playerWonEv(results)) { //Gore win
        engine.setNewMusic([{
    displayName: "D:Ream- Things Can Only Get Better",
    imageUrl: "https://i.imgur.com/KQZDp3q.jpeg",
    url: "https://file.garden/Z7qfmQZIZjO_xV5N/D_Ream%20-%20Things%20Can%20Only%20Get%20Better%20-%20TOTP%20-%202%20May%201997.mp3",
  },
]);

        return {
            slides: [
                    {
                        endingHeader: "r/Presidents- What would a Clinton presidency look like if he won in 1992? Who would he face in 1996?",
                        imageUrl: "https://i.imgur.com/96InrPs.jpeg",
                        endingText: "<p>Many of your supporters are despondent that you have faltered to the likes of Donald Trump. Many in the left wing of the party are furious that you pushed their candidate aside, only to lose. Time will tell how Trump operates as President. As for you, a long and sometimes ambiguous political career seems to be coming to its end.</p>"
                },
                {
                    endingHeader: "r/Presidents- What would a Clinton presidency look like if he won in 1992?",
                    imageUrl: "https://i.imgur.com/cLKrz6P.png",
                    endingText: "<p> Posted by u/Fancy-Blackberry-471<br><br></p><center><img src='https://i.imgur.com/nEshuW6.jpeg'><br>Who would he face in 1996? Would he win reelection?<br><br><br>u/NewShadowPatriot1999 - +5<br>It would probably be similar to Gore's. Maybe a little further to the right. As for '96, maybe Dole or Wilson don't flame out. I don't think either would win though. <br><br>u/thatmarylander12 - +2<br>I think Cheney could be the nominee. He had the 'experienced' angle to play. He wouldn't win the election obv but still<br><br><br>u/Yuno_Ball - +2<br>He would break JFK's record for shacking up in the WH i bet<br>"
                },  
            ]
        }
    }
else if(engine.isDeadlock(results)) { //Gore deadlock
        engine.setNewMusic([
  {
    displayName: "Cake - The Distance",
    imageUrl: "https://i.imgur.com/v7rsxmc.jpeg",
    url: "https://file.garden/Z7qfmQZIZjO_xV5N/CAKE%20-%20The%20Distance%20(Live).mp3",
  },
]);

        return {
            slides: [
                {
                    endingHeader: "Crisis in the Campaign",
                    imageUrl: "https://i.imgur.com/2h3etnI.jpeg",
                    endingText: "<p>They've done it, Scoop says. The bastards - the devil Dixiecrats - they've deadlocked the election. This is a crisis, Scoop says.</p><p>Dad looks more like the devil himself. His small, beady eyes, like tiny scorching suns, locked on you. You're not sure what he's more angry at - you, Nixon, or Jack. Maybe himself.</p><p>Jack is silent. It must feel excruciating - so, so close, but so, so far.</p><p>Democrats hold the House, but will Southern delegations fall behind? After Jack's campaign? Hardly. Will the Senators fall behind Scoop? Maybe. You consider calling Johnson, but only for a moment. For some reason, you feel that he will not be of much help.</p><p>It's going to be a long, cold month.</p>"
                }
            ]
            }
        }

    
        else { //Gore loss
        engine.setNewMusic([{
    displayName: "Blues Traveler - Run-Around",
    imageUrl: "https://i.imgur.com/NThtETp.jpeg",
    url: "https://file.garden/Z7qfmQZIZjO_xV5N/Run-AroundLive.mp3",
  },
]);

        return {
            slides: [
                    {
                        endingHeader: "Sorry! You have lost the 2016 election.",
                        imageUrl: "https://i.imgur.com/KX9itvY.jpeg",
                        endingText: "<p>Many of your supporters are despondent that you have faltered to the likes of Donald Trump. Many in the left wing of the party are furious that you pushed their candidate aside, only to lose. Time will tell how Trump operates as President. As for you, a long and sometimes ambiguous political career seems to be coming to its end.</p>"
                }
            ]
            }
        }
    }
  // If you played as Perot
    else if(playerId == 79) {
        if(engine.playerWonEv(results)&& trump == false) {
        engine.setNewMusic([{
    displayName: "Ben Folds Five - One Angry Dwarf and 200 Solemn Faces",
    imageUrl: "https://i.imgur.com/S9Vp71Z.jpeg",
    url: "https://file.garden/Z7qfmQZIZjO_xV5N/AngryDwarf.mp3",
  },
]);

        return {
            slides: [
                    {
                        endingHeader: "perot win",
                        imageUrl: "https://i.imgur.com/QpzKmjw.jpeg",
                        endingText: "<p>In spite of a hard-fought challenge from Donald Trump, you have become the first woman elected to serve as President.</p><p>On the political front, it is unclear how much of your agenda you will be able to push forward with the current Congress. Hopefully your victory has helped Democrats further down the ballot. Start packing and prepare to move back into the White House!</p>"
                }
            ]
            }
        }
        else  if(engine.playerWonEv(results)&& trump == true) {
        engine.setNewMusic([{
    displayName: "Andrew Lloyd Webber - The Phantom of the Opera",
    imageUrl: "https://i.imgur.com/KRzMM8E.jpeg",
    url: "https://file.garden/Z7qfmQZIZjO_xV5N/Phantom.mp3",
  },
]);

        return {
            slides: [
                    {
                        endingHeader: "Trump win",
                        imageUrl: "https://i.imgur.com/00KSHoy.jpeg",
                        endingText: "<p>In spite of a hard-fought challenge from Donald Trump, you have become the first woman elected to serve as President.</p><p>On the political front, it is unclear how much of your agenda you will be able to push forward with the current Congress. Hopefully your victory has helped Democrats further down the ballot. Start packing and prepare to move back into the White House!</p>"
                } 
            ]
            }
        }

                else if(engine.isDeadlock(results) && trump == false) { //Narrowish loss
        engine.setNewMusic([
  {
    displayName: "Pete Seeger - The Ross Perot Guide to Answering Embarrassing Questions",
    imageUrl: "https://i.imgur.com/OzZW2xB.jpeg",
    url: "https://file.garden/Z7qfmQZIZjO_xV5N/ILie.mp3",
  },
]);

        return {
            slides: [
                {
                    endingHeader: "perot deadlock",
                    imageUrl: "https://i.imgur.com/p3Mfn6G.jpeg",
                    endingText: "<p>kingmaking time</p>"
                }
            ]
            }
        }


        else if(engine.isDeadlock(results) && trump == true) { //Narrowish loss
        engine.setNewMusic([
  {
    displayName: "Andrew Lloyd Webber -  Could We Start Again, Please?",
    imageUrl: "https://m.media-amazon.com/images/I/81gVXYUXj-L._UF1000,1000_QL80_.jpg",
    url: "https://file.garden/Z7qfmQZIZjO_xV5N/TrumpLock.mp3",
  },
]);

        return {
            slides: [
                {
                    endingHeader: "Trump deadlock",
                    imageUrl: "https://i.imgur.com/UQ4fPLU.jpeg",
                    endingText: "<p>Sad!</p>"
                } 
            ]
            }
        }
        else if(engine.playerEvAtLeast(results, 3) && trump == true) { //Narrowish loss
        engine.setNewMusic([
  {
    displayName: "Andrew Lloyd Webber - Memory",
    imageUrl: "https://upload.wikimedia.org/wikipedia/en/1/1a/Cats_Complete_Original_Broadway_Cast_Recording.jpg",
    url: "https://file.garden/Z7qfmQZIZjO_xV5N/Memory.mp3",
  },
]);

        return {
            slides: [
                {
                    endingHeader: "Trump loss",
                    imageUrl: "https://i.imgur.com/1KolLQ7.jpeg",
                    endingText: "<p>Sad!</p>"
                } 
            ]
            }
        }

        else {
        engine.setNewMusic([{
    displayName: "Crazy - Julio Iglesias",
    imageUrl: "https://upload.wikimedia.org/wikipedia/en/c/cf/Crazy_%28Julio_Iglesias%29.jpg",
    url: "https://file.garden/Z7qfmQZIZjO_xV5N/Julio%20Iglesias%20Crazy%20%5B4aIlNXpVdsY%5D.mp3",
  },
]);

        return {
            slides: [
                    {
                        endingHeader: "Perot loss",
                        imageUrl: "https://i.imgur.com/YbSsiDr.jpeg",
                        endingText: "<p>Many of your supporters are despondent that you have faltered to the likes of Donald Trump. Many in the left wing of the party are furious that you pushed their candidate aside, only to lose. Time will tell how Trump operates as President. As for you, a long and sometimes ambiguous political career seems to be coming to its end.</p>"
                 },
                {
                    endingHeader: "Futurama: The Day The Earth Stood Stupid",
                    imageUrl: "https://i.imgur.com/a0aIIfD.jpeg",
                    endingText: "<p>FRY:What are we going to do?</p><p>FARNSWORTH:Duh, I know, let's play the lottery.</p><p>AMY: No, let's buy internet stock.</p><p>ZOIDBERG: On margin. Zoidbee wants to buy on margin.</p><p>HERMES:  [holding a board in front of his face] Look at me. I'm invisible.</p><p>FRY: Wait a minute, I know what's going on here. You've all become idiots!</p></p><p>BENDER: Hey, let's all join the Independence Party! </p><p>[Everyone cheers.]</p>"
                },  
            ]
        }
    }
    }


    // No other endings defined, return an error
    else {
        return {
            slides: [
                {
                    endingHeader: "Perot deadlock",
                    imageUrl: "https://www.jetsimon.com/public/static/images/henry-clay-1844.jpg",
                    endingText: "Bad ending"
                }
            ]
        }
    }
}

var trump = false;

function onAnswerPicked(engine, answerPicked) {
    // This scenario has mild CYOA
    const ans = answerPicked.id;
    const playerId = engine.getPlayerCandidateController().getId();

    if (ans == 3414 && playerId == 79) {
        engine.setNewPlayerCandidateImage("https://i.imgur.com/g5bVAlq.png");
        engine.setNewPlayerCandidateName("Donald J.", "Trump");

        engine.setNewRunningMateImage("https://i.imgur.com/fsSEtHR.png");
        engine.setNewRunningMateName("Richard", "Lamm");
        trump = true;
        engine.currentQuestionIndex = 25

    }
}

function onScenarioStarted(engine) {
    
}

export {createEnding, onAnswerPicked, onScenarioStarted}

