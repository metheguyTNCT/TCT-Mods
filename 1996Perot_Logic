function createEnding(engine, results) {

    const playerId = engine.getPlayerCandidateController().getId();

    // I am defining some endings below. Note I have to check who the player played as first in this scenario.
    // You could also add more slides to have endings with pages

    // If you played as Gramm
    if(playerId == 77) {
        if(engine.playerWonEv(results)) { //Gramm win
        engine.setNewMusic([{
    displayName: "Johnny Cash, U2- The Wanderer",
    imageUrl: "https://i.imgur.com/OoMUvkK.jpeg",
    url: "https://files.catbox.moe/nlvcks.mp3",
  },
]);

        return {
            slides: [
                    {
                        endingHeader: "Congratulations! You have won the 2016 election.",
                        imageUrl: "https://i.imgur.com/PZ4LsR6.jpeg",
                        endingText: "<p>In spite of a hard-fought challenge from Hillary Clinton, you have shocked the world with your election victory.</p><p>On the political front, you have the bully pulpit in your favor, but support in Congress in uncertain. Will you govern as a more traditional conservative, or will you make a break from orthodoxy?</p>"
                },
                {
                    endingHeader: "THE CAMPAIGN TRAIL",
                    imageUrl: "https://i.imgur.com/lqgMoED.png",
                    endingText: "<p>things are fine ig</p> <ul><li>Gramm</li><li>Gore</li> <li>Trump</ul>"
                },  
            ]
            }
        }
else if(engine.isDeadlock(results)) { //Gramm deadlock
        engine.setNewMusic([
  {
    displayName: "Nirvana- The Man Who Sold The World",
    imageUrl: "https://i.imgur.com/lJsxGWS.jpeg",
    url: "https://audio.jukehost.co.uk/PMIK6WHngYsr7d4xxyS20DihNYcuBHaN",
  },
]);

        return {
            slides: [
                {
                    endingHeader: "Gramm deadlock",
                    imageUrl: "https://i.imgur.com/6n7Wno1.jpeg",
                    endingText: "<p>They've done it, Scoop says. The bastards - the devil Dixiecrats - they've deadlocked the election. This is a crisis, Scoop says.</p><p>Dad looks more like the devil himself. His small, beady eyes, like tiny scorching suns, locked on you. You're not sure what he's more angry at - you, Nixon, or Jack. Maybe himself.</p><p>Jack is silent. It must feel excruciating - so, so close, but so, so far.</p><p>Democrats hold the House, but will Southern delegations fall behind? After Jack's campaign? Hardly. Will the Senators fall behind Scoop? Maybe. You consider calling Johnson, but only for a moment. For some reason, you feel that he will not be of much help.</p><p>It's going to be a long, cold month.</p>"
                },
                {
                    endingHeader: "THE CAMPAIGN TRAIL",
                    imageUrl: "https://i.imgur.com/6Vhxlc1.png",
                    endingText: "<p>Dealdock. Populism time.</p> <ul><li>old ahh president</li><li>Lamar!</li> <li>Former Ross Perot has embarked on a revenge tour, seeking to regain his coalition from eight years ago.</ul>"
                },  
            ]
            }
        }

    
        else { // Gramm loss
        engine.setNewMusic([{ 
    displayName: "The Beach Boys- Lookin' at Tomorrow (A Welfare Song)",
    imageUrl: "https://i.imgur.com/4sbb0JA.png",
    url: "https://audio.jukehost.co.uk/lTvoXB9Io94ZgGJkmS0x5TVQmnMh8O1l",
  },
]);

        return {
            slides: [
                    {
                        endingHeader: "Sorry! You have lost the 2016 election.",
                        imageUrl: "https://i.imgur.com/l1CM6j2.png",
                        endingText: "<p>Many of your supporters are despondent that you have faltered to the likes of Hillary Clinton. Republicans in general believe this was a very winnable election, and are enraged that you came in to blow it. Luckily, there are any number of ways for you to take advantage of your newfound exposure. One rumor even has you founding a television station to profit from the aggrieved sensibilities of your followers. The future is in your hands.</p>"
                  },
                {
                    endingHeader: "THE CAMPAIGN TRAIL",
                    imageUrl: "https://i.imgur.com/LeDfHdl.png",
                    endingText: "<p>Ted</p> <ul><li>Kennedy</li><li>Robertson</li> <li>IT'S HAPPENING.</ul>"
                },  
            ]
            }
        }
    }
    // If you played as Gore
    else if(playerId == 78) {
        if(engine.playerWonEv(results)) { //Gore win
        engine.setNewMusic([{
    displayName: "Stevie Wonder- Sir Duke",
    imageUrl: "https://i.imgur.com/XLkPPoi.jpeg",
    url: "https://files.catbox.moe/bn546f.mp3",
  },
]);

        return {
            slides: [
                    {
                        endingHeader: "The Dream Lives On",
                        imageUrl: "https://i.imgur.com/96InrPs.jpeg",
                        endingText: "<p>In spite of a hard-fought challenge from Donald Trump, you have become the first woman elected to serve as President.</p><p>On the political front, it is unclear how much of your agenda you will be able to push forward with the current Congress. Hopefully your victory has helped Democrats further down the ballot. Start packing and prepare to move back into the White House!</p>"
                },
                {
                    endingHeader: "THE CAMPAIGN TRAIL",
                    imageUrl: "https://i.imgur.com/LeDfHdl.png",
                    endingText: "<p>Ted</p> <ul><li>Kennedy</li><li>Robertson</li> <li>IT'S HAPPENING.</ul>"
                },  
            ]
            }
        }
else if(engine.isDeadlock(results)) { //Kennedy deadlock
        engine.setNewMusic([
  {
    displayName: "Bachman-Turner Overdrive- You Ainâ€™t Seen Nothing Yet",
    imageUrl: "https://i.imgur.com/ZodfxBr.jpeg",
    url: "https://files.catbox.moe/kc1fbz.mp3",
  },
]);

        return {
            slides: [
                {
                    endingHeader: "Crisis in the Campaign",
                    imageUrl: "https://i.imgur.com/bCMBbl3.jpeg",
                    endingText: "<p>They've done it, Scoop says. The bastards - the devil Dixiecrats - they've deadlocked the election. This is a crisis, Scoop says.</p><p>Dad looks more like the devil himself. His small, beady eyes, like tiny scorching suns, locked on you. You're not sure what he's more angry at - you, Nixon, or Jack. Maybe himself.</p><p>Jack is silent. It must feel excruciating - so, so close, but so, so far.</p><p>Democrats hold the House, but will Southern delegations fall behind? After Jack's campaign? Hardly. Will the Senators fall behind Scoop? Maybe. You consider calling Johnson, but only for a moment. For some reason, you feel that he will not be of much help.</p><p>It's going to be a long, cold month.</p>"
                },
                {
                    endingHeader: "THE CAMPAIGN TRAIL",
                    imageUrl: "https://i.imgur.com/6Vhxlc1.png",
                    endingText: "<p>Dealdock. Populism time.</p> <ul><li>old ahh president</li><li>Lamar!</li> <li>Former Ross Perot has embarked on a revenge tour, seeking to regain his coalition from eight years ago.</ul>"
                },  
            ]
            }
        }

    
        else { //Kennedy loss
        engine.setNewMusic([{
    displayName: "Phil Ochs - The Crucifixion",
    imageUrl: "https://i.imgur.com/GOHsZ2F.jpeg",
    url: "https://audio.jukehost.co.uk/rgge7w0JSXm0HgLwuxGpTTmTbQSoCMOj",
  },
]);

        return {
            slides: [
                    {
                        endingHeader: "Sorry! You have lost the 2016 election.",
                        imageUrl: "https://i.imgur.com/pzTUuAX.jpeg",
                        endingText: "<p>Many of your supporters are despondent that you have faltered to the likes of Donald Trump. Many in the left wing of the party are furious that you pushed their candidate aside, only to lose. Time will tell how Trump operates as President. As for you, a long and sometimes ambiguous political career seems to be coming to its end.</p>"
                },
                {
                    endingHeader: "THE CAMPAIGN TRAIL",
                    imageUrl: "https://i.imgur.com/lqgMoED.png",
                    endingText: "<p>things are fine ig</p> <ul><li>Gramm</li><li>Gore</li> <li>Trump</ul>"
                },  
            ]
            }
        }
    }
  // If you played as Perot
    else if(playerId == 79) {
        if(engine.playerWonEv(results)&& brown == false) {
        engine.setNewMusic([{
    displayName: "R.E.M. - It's The End Of The World As We Know It (And I Feel Fine)",
    imageUrl: "https://i.imgur.com/iCjpqRU.jpeg",
    url: "https://files.catbox.moe/1dbe8r.mp3",
  },
]);

        return {
            slides: [
                    {
                        endingHeader: "perot win",
                        imageUrl: "https://i.imgur.com/QpzKmjw.jpeg",
                        endingText: "<p>In spite of a hard-fought challenge from Donald Trump, you have become the first woman elected to serve as President.</p><p>On the political front, it is unclear how much of your agenda you will be able to push forward with the current Congress. Hopefully your victory has helped Democrats further down the ballot. Start packing and prepare to move back into the White House!</p>"
                },
                {
                    endingHeader: "THE CAMPAIGN TRAIL",
                    imageUrl: "https://i.imgur.com/ZfE56NN.png",
                    endingText: "<p>After Ross Perot's shock reelection, it's clear the party realignment is here to stay.</p> <ul><li>Pete Wilson has returned, hoping to maintain his wide lead and please the base.</li><li>Jesse Ventura must deal with Perot's unpopularity and keep his coalition together.</li> <li>Jesse Jackson hopes simply to do well enough to keep the Democrats alive for another four years.<li>Buchanan hopes to force a deadlock and show Wilson and Ventura that the Right cannot be ignored.</ul>"
                },  
            ]
            }
        }
        else  if(engine.playerWonEv(results)&& brown == true) {
        engine.setNewMusic([{
    displayName: "California Uber Alles - Dead Kennedies",
    imageUrl: "https://i.imgur.com/SBPbiLo.jpeg",
    url: "https://files.catbox.moe/x5waq4.mp3",
  },
]);

        return {
            slides: [
                    {
                        endingHeader: "Brown win",
                        imageUrl: "https://i.imgur.com/EV6Du5B.jpeg",
                        endingText: "<p>In spite of a hard-fought challenge from Donald Trump, you have become the first woman elected to serve as President.</p><p>On the political front, it is unclear how much of your agenda you will be able to push forward with the current Congress. Hopefully your victory has helped Democrats further down the ballot. Start packing and prepare to move back into the White House!</p>"
                },
                {
                    endingHeader: "THE CAMPAIGN TRAIL",
                    imageUrl: "https://i.imgur.com/uKK1kaS.png",
                    endingText: "<p>moonbeam not gud presdient</p> <ul><li>djo bi deng</li><li>the j.</li> <li>teve torbes.</ul>"
                },  
            ]
            }
        }

                else if(engine.isDeadlock(results) && brown == false) { //Narrowish loss
        engine.setNewMusic([
  {
    displayName: "Sheldon Harnick, Jerry Bock -  Politics and Poker",
    imageUrl: "https://i.imgur.com/nWqrvG5.jpeg",
    url: "https://files.catbox.moe/ep5w9y.mp3",
  },
]);

        return {
            slides: [
                {
                    endingHeader: "perot deadlock",
                    imageUrl: "https://i.imgur.com/p3Mfn6G.jpeg",
                    endingText: "<p>kingmaking time</p>"
                },
                {
                    endingHeader: "THE CAMPAIGN TRAIL",
                    imageUrl: "https://i.imgur.com/y4HDh90.png",
                    endingText: "<p>the king has been made</p> <ul><li>billy clinty</li><li>Phil Gramm</li> <li>nader</ul>"
                },  
            ]
            }
        }


        else if(engine.isDeadlock(results) && brown == true) { //Narrowish loss
        engine.setNewMusic([
  {
    displayName: "The Mamas and the Papas -  California Dreamin'",
    imageUrl: "https://i.imgur.com/baj25RC.jpeg",
    url: "https://files.catbox.moe/50zp5f.mp3",
  },
]);

        return {
            slides: [
                {
                    endingHeader: "brown deadlock",
                    imageUrl: "https://i.imgur.com/mHP6MkD.jpeg",
                    endingText: "<p>Sad!</p>"
                },
                {
                    endingHeader: "THE CAMPAIGN TRAIL",
                    imageUrl: "https://i.imgur.com/3Vw4LXz.png",
                    endingText: "<p>deadlock. ted is president. call that a tedlock</p> <ul><li>teddy darling you forgot your danching shoes</li><li>STOP THE STEAL</li> <li>im john anderson im here too</ul>"
                },  
            ]
            }
        }
        else if(engine.playerEvAtLeast(results, 3) && brown == true) { //Narrowish loss
        engine.setNewMusic([
  {
    displayName: "Where Are You Now When We Need You Ross Perot - Don Mason",
    imageUrl: "https://i.imgur.com/jJq6c2M.jpeg",
    url: "https://files.catbox.moe/v6jvgw.mp3",
  },
]);

        return {
            slides: [
                {
                    endingHeader: "brown loss",
                    imageUrl: "https://i.imgur.com/eaGXZzV.jpeg",
                    endingText: "<p>Sad!</p>"
                },
                {
                    endingHeader: "THE CAMPAIGN TRAIL",
                    imageUrl: "https://i.imgur.com/CiCPxd5.png",
                    endingText: "<p>ted won hes old af</p> <ul><li>Ted Kennedy.</li><li>slimy ahh newt</li> <li>Jack Gargan</ul>"
                },  
            ]
            }
        }

        else {
        engine.setNewMusic([{
    displayName: "Crazy - Patsy Cline",
    imageUrl: "https://i.imgur.com/cwe6HJX.jpeg",
    url: "https://files.catbox.moe/0t5b9l.mp3",
  },
]);

        return {
            slides: [
                    {
                        endingHeader: "Perot loss",
                        imageUrl: "https://i.imgur.com/YbSsiDr.jpeg",
                        endingText: "<p>Many of your supporters are despondent that you have faltered to the likes of Donald Trump. Many in the left wing of the party are furious that you pushed their candidate aside, only to lose. Time will tell how Trump operates as President. As for you, a long and sometimes ambiguous political career seems to be coming to its end.</p>"
                 },
                {
                    endingHeader: "THE CAMPAIGN TRAIL",
                    imageUrl: "https://i.imgur.com/LeDfHdl.png",
                    endingText: "<p>Ted</p> <ul><li>Kennedy</li><li>Robertson</li> <li>IT'S HAPPENING.</ul>"
                },  
            ]
            }
        }
    }


    // No other endings defined, return an error
    else {
        return {
            slides: [
                {
                    endingHeader: "Perot deadlock",
                    imageUrl: "https://www.jetsimon.com/public/static/images/henry-clay-1844.jpg",
                    endingText: "Bad ending"
                }
            ]
        }
    }
}

var brown = false;

function onAnswerPicked(engine, answerPicked) {
    // This scenario has mild CYOA
    const ans = answerPicked.id;
    const playerId = engine.getPlayerCandidateController().getId();

    if (ans == 3414 && playerId == 79) {
        engine.setNewPlayerCandidateImage("https://i.imgur.com/XBvkeE8.png");
        engine.setNewPlayerCandidateName("Jerry", "Brown");

        engine.setNewRunningMateImage("https://i.imgur.com/fsSEtHR.png");
        engine.setNewRunningMateName("Richard", "Lamm");
        brown = true;
        engine.currentQuestionIndex = 25

    }
}

function onScenarioStarted(engine) {
    
}

export {createEnding, onAnswerPicked, onScenarioStarted}
