campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 4,
        "fields": {
            "year": 1968,
            "summary": "<p>The long national nightmare is over. </p><p>No matter what, the lying tyrant Lyndon Johnson will be out of the White House, and his pathetic little stooge won't be there either. Instead, two liberal New York titans battle each other, while a more vicious tyrant assails them both in Alabama.\n</p><p>Robert Kennedy promises to restore the idealism stolen from the nation in November, 1963, while Nelson Rockefeller provides a pragmatic, experienced and steady hand to a nation in turmoil.</p>\n",
            "image_url": "https://i.imgur.com/5lXosmb.png",
            "winning_electoral_vote_number": 270,
            "advisor_url": "https://www.jetsimon.com/public/static/images/haldeman-mondale.jpg",
            "recommended_reading": "<h4 style=\"margin-top: 0.5em;\">General Resources</h4><a href=\"http://uselectionatlas.org/RESULTS/national.php?year=1968\" target=\"_blank\">Final 1968 Results</a><br>Theodore White - <a href=\"http://www.amazon.com/exec/obidos/ASIN/0061900648/amhius20-20\" target=\"_blank\">The Making of the President 1968 (Landmark Political)</a><br>Rick Perlstein - <a href=\"http://www.amazon.com/exec/obidos/ASIN/B003E7ET0S/amhius20-20\" target=\"_blank\">Nixonland: The Rise of a President and the Fracturing of America</a><br><h4>By the Candidates</h4>Richard Nixon - <a href=\"http://www.amazon.com/exec/obidos/ASIN/0448143747/amhius20-20\" target=\"_blank\">The Memoirs of Richard Nixon</a><br>Hubert Humphrey - <a href=\"http://www.youtube.com/watch?v=8nwIdIUVFm4\" target=\"_blank\">1948 Civil Rights speech</a><br>George Wallace - <a href=\"https://www.youtube.com/watch?v=DcNv4aQI_QQ\" target=\"_blank\">1967 speech on dissent and intellectualism</a><br><h4>The Vietnam War</h4> Stanley Karnow - <a href=\"http://www.amazon.com/exec/obidos/ASIN/0140265473/amhius20-20\" target=\"_blank\" >Vietnam: A History</a><h4>Misceallany</h4><a href=\"http://www.jahrbuch2001.studien-von-zeitfragen.net/Weltmacht/Secret_of__68/secret_of__68.html\" target=\"_blank\">Secret of '68</a><br><a href=\"http://www.propublica.org/article/living-apart-how-the-government-betrayed-a-landmark-civil-rights-law\" target=\"_blank\">Living Apart: How the Government Betrayed a Landmark Civil Rights Law</a><br><a href=\"http://www.nytimes.com/2012/09/05/business/the-gops-journey-from-the-liberal-days-of-nixon.html\" target=\"_blank\">The G.O.P.'s Journey From the Liberal Days of Nixon</a><br><a href=\"http://www.umich.edu/~lawrace/votetour10.htm\" target=\"_blank\">George Wallace and the 1968 Election</a>",
            "has_visits": 1,
            "no_electoral_majority_image": "https://www.jetsimon.com/public/static/images/1968-no-majority.jpg",
            "creator": "Dan Bryan",
            "display_year": "1968"
        }
    }
]

campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 23,
        "fields": {
            "first_name": "Nelson A.",
            "last_name": "Rockefeller",
            "election": 4,
            "party": "'Republican'",
            "state": "New York",
            "priority": 1,
            "description": "<p>Reagan is sulking in his hotel room, murmuring something about the \"11th Commandment\". Goldwater sits in the hall, \"joking about hoping you get a round of applause. Nixon is... god only knows. Or cares, frankly. You don't need them. You don't need any of them.</p><p>Rockfeller is an institution only barely not as old but twice as grand as the GOP. The latest scion of the venerable name, Nelson Rockefeller brings with him a record of excellence and moderate adoration, as well as the fury and hate of a right wing that would rather be correct than win.</p><p>Initially hesitant to enter the race, Kennedy's entry spurred his own. Unlike Kennedy, Rockefeller doesn't intend to bring about a shameful surrender in Vietnam. The goal of the Rockefeller campaign is to bring the troops home and keep American prestige and address those trifling domestic issues, if they come up.</p>\n",
            "color_hex": "#FF0000",
            "secondary_color_hex": "#FFA0A0",
            "is_active": 1,
            "image_url": "https://i.imgur.com/owL0G3F.png",
            "electoral_victory_message": "<h3>Congratulations! You have won the 1968 election!</h3><p>In one of the great turnarounds of American politics, you have salvaged your once-wrecked political career and shed your label as a 'loser' once and for all. As it turns out, the press <em>will</em> have Nixon to kick around.</p><p>If you can end the War in Vietnam and roll back the excesses of the Great Society, you may just go down as a truly great President. Good luck working with a Democratic Congress, however...</p>",
            "electoral_loss_message": "<h3>Sorry, you have lost the 1968 election.</h3><p>Never has a candidate been so far ahead in a Presidential election, only to come up short. After your heartbreaking loss in 1960, it's going to take a long while for you to recover from this new defeat.</p><p>The American public will never know what might have transpired with you in the Oval Office. As it is, you are sure to enjoy a long retirement after this one...</p>",
            "no_electoral_majority_message": "<h3>Wow! No candidate holds a majority in the electoral college.</h3><p>Wallace's machinations have succeeded. The election will go to the House of Representatives where the Democrats hold a clear majority.</p><p>You do hold some cards however -- Humphrey would certainly rather make concessions to you, rather than deal with George Wallace. Perhaps you could obtain a place in his Administration, or some assurances on a policy issue of your choice.</p>",
            "description_as_running_mate": null,
            "candidate_score": 0.666,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 24,
        "fields": {
            "first_name": "Robert F.",
            "last_name": "Kennedy",
            "election": 4,
            "party": "Democrat",
            "state": "'New York'",
            "priority": 2,
            "description": "It was never supposed to be like this.<p>If he ever got the top job, it would be a coronation. Shaking hands with his brother, a grudging but smiling concession from whoever tried to rival him, and adulation from a crowd.</p><p>Instead Robert Kennedy steals a party in collapse. He endures silence from the White House and Gene McCarthy, a convention in flames, and a legacy under attack.</p><p>This is all perfectly acceptable to New York's Senator. A victory handed to him would have made him ill. Now he will work for America, all of America, enduring the threats and jeers of the scared and the strong, so that he can save the soul of the nation. He will bear any burden to see his mission through.</p> ",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 1,
            "image_url": "https://i.imgur.com/MGMTci4.png",
            "electoral_victory_message": "<h3>Congratulations! You have won the 1968 election!</h3><p>It looked like a hopeless case as you accepted the nomination, but you have run an outstanding campaign in the interval.</p><p>Now you must press forward with your efforts to defend the Great Society and to end the war in Vietnam. Failure in the latter case could be devastating when you seek reelection in 1972. After all, just look at what happened to the once-lustrous reputation of Lyndon Johnson over the past four years...</p>",
            "electoral_loss_message": "<h3>Sorry, you have lost the 1968 election.</h3><p>You may have performed admirably under trying circumstances, but it was always a tough sell for you after the chaos at the Democratic Convention in Chicago.</p><p>Your only consolation is that Nixon himself is a former loser. Even so, this is a horrednous turn of events for Democrats after the landslide of 1964. The best you can do now is to plot a comeback to the Senate, or as a candidate for President in 1972.</p>",
            "no_electoral_majority_message": "<h3>Wow! No candidate achieved a majority in the electoral college.</h3><p>Fortunately for you the Democrats have won a majority of the nation's Congressional delegations. Unfortunately, you also have to deal with George Wallace. He will not allow the Southern states to support any candidate who advocates desegregation.</p><p>Your best chance, sadly, is to try to broker a deal with Nixon or with other moderate Republicans.</p><p>You are the likely winner, but who knows where this all ends?</p>",
            "description_as_running_mate": null,
            "candidate_score": 0.7,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 25,
        "fields": {
            "first_name": "George C.",
            "last_name": "Wallace",
            "election": 4,
            "party": "American Independent",
            "state": "Alabama",
            "priority": 3,
            "description": "Who could have seen that one coming?<p>George Wallace was prepared for animals. Lyndon Johnson and Richard Nixon. Men who grew up poor and angry, who know what it was to be powerless and powerful. Instead he faces Robert Kennedy and Nelson Rockefeller, the embodiments of everything he rails against.</p><p>Two bossy East Coast Liberals that want to destroy the Southern way of life. Two egomaniacs more concerned with \"national prestige\" than the country burning down. Two rich bastards who have never worked a day in their lives.</p><p>Things could not be better for George Corley Wallace. He is in the perfect position to unite conservative opposition against the establishment creatures, and to hold the future of the nation the palm of his hands.</p> ",
            "color_hex": "#FFFF00",
            "secondary_color_hex": "#FFFFC0",
            "is_active": 1,
            "image_url": "https://i.imgur.com/NJj8LFN.png",
            "electoral_victory_message": "<h3>Wow! You have won the 1968 election in a shocker!</h3><p>Dixie forever! Even with the Long Hot Summer of 1967, nobody guessed that you could do well enough in the Northern states to win the election outright. You have instantly become most polarizing President-elect since Abraham Lincoln.</p>",
            "electoral_loss_message": "<h3>Sorry, you did not prevent an electoral college majority.</h3><p>You put in a good effort, but your dream of brokering an end to desegregation will not come to fruition in 1968. No winning candidate will negotiate that point with you unless they absolutely have no choice.</p><p>The best you can do for now is continue to sound the call for a return to sanity in American politics. Perhaps if the riots and discord continue, you will have a better chance of making your voice heard in 1972.</p>",
            "no_electoral_majority_message": "<h3>Congratulations! You have deadlocked the electoral college with your votes in the South.</h3><p>In a close election, your electoral votes in the South have prevented either candidate from winning a majority. Get ready to put the squeeze on Humphrey and Nixon.</p><p>Of course, you still have to deal with the possibility that Humphrey and Nixon dislike you so much that they will simply strike a deal with each other. Whatever happens, it's sure to be interesting.</p>",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 55,
        "fields": {
            "first_name": "Spiro T.",
            "last_name": "Agnew",
            "election": 4,
            "party": "Republican",
            "state": "Maryland",
            "priority": 29,
            "description": "n/a",
            "color_hex": "#FF0000",
            "secondary_color_hex": "#FFA0A0",
            "is_active": 0,
            "image_url": "https://i.imgur.com/VZY0167.png",
            "electoral_victory_message": "n/a",
            "electoral_loss_message": "n/a",
            "no_electoral_majority_message": "n/a",
            "description_as_running_mate": "<P>Governor Agnew, you're familiar with him. He's been a fan of yours, for a quite a while. He openly boasted about following your example down in Maryland. Of course, that was before he felt snubbed by your initial refusal to run. After that, he was loyal to Nixon till the very end, spurning any attempt to win him back.</p><p>He won his seat against a segregationist, and signed off on some limited open housing plans, but made the bold decision to chastise black Maryland community for insufficient denouncement of black radicals. Pair it with Maryland technically being a southern state and there may be, with enough party platform compromises, to win over Thurmond's approval for Agnew.</p><p>Agnew compliments the ticket well. A political moderate, a fellow executive and a man competent enough to win in another deep blue state, he would be a boon to the ticket... if he could get over his problem with you.\n</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 56,
        "fields": {
            "first_name": "John G.",
            "last_name": "Tower",
            "election": 4,
            "party": "Republican",
            "state": "Texas",
            "priority": 30,
            "description": "n/a",
            "color_hex": "#FF0000",
            "secondary_color_hex": "#FFA0A0",
            "is_active": 0,
            "image_url": "https://i.imgur.com/FISLbP4.png",
            "electoral_victory_message": "n/a",
            "electoral_loss_message": "n/a",
            "no_electoral_majority_message": "n/a",
            "description_as_running_mate": "<p>If you're going win the Presidency, it's going to be with a reluctant gnarled thumbs up from Strom Thurmond. Never mind that you were born a Republican and Thurmond only defected 4 years ago. Clearly, he's the man to decide the future of the Republican party.</p><p>Fine. If that's what it takes, you'll tolerate whatever man they demand. And they demand John Tower, the man that owns Lyndon Johnson's senate seat. A segregationist nutjob, but a professional one, he'll be the deadweight you'll be forced to drag kicking and screaming to victory.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 58,
        "fields": {
            "first_name": "Russell B.",
            "last_name": "Long",
            "election": 4,
            "party": "Democrat",
            "state": "Louisiana",
            "priority": 33,
            "description": "n/a",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://i.imgur.com/rN6lNhf.png",
            "electoral_victory_message": "n/a",
            "electoral_loss_message": "n/a",
            "no_electoral_majority_message": "n/a",
            "description_as_running_mate": "<P>Damn the South. Damn their backwardness, their graft, their constant deal making. Damn it all. Robert has no intention of repeating Jack's biggest mistake and appease their ilk. But if he's going to walk out of the convention the Democratic nominee, he needs to lie to the South. Just a little while longer. Just long enough for them to think he will be patient in destroying their evil. Enter Russell Long.</p><p>Long is a quiet, cowardly yet deceptively powerful Senate backbencher. The fourth branch of government, he's been instrumental in the passage of the Great Society, while voting against every piece of civil rights legislation to maintain the support of his racist voter base. Compared to other loathsome options he's being forced to consider, Long is an appealing choice.</p><p>All of this is news to Long, who would vastly prefer to remain chair of the finance committee than thrust into the powerless position of Vice-President. But cowardly to the end, he will submit under you, if you will it.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 59,
        "fields": {
            "first_name": "J. William",
            "last_name": "Fulbright",
            "election": 4,
            "party": "Democrat",
            "state": "Arkansas",
            "priority": 34,
            "description": "n/a",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://i.imgur.com/EVwySD1.png",
            "electoral_victory_message": "n/a",
            "electoral_loss_message": "n/a",
            "no_electoral_majority_message": "n/a",
            "description_as_running_mate": "<P>You must compromise on racial justice. You must kneel to the south, just once. But why do you need to compromise on anything else? Shockingly, Fulbright is may allow you to this.</p><p>Fulbright is an elderly bigot. He signed the Southern manifesto and he is admired by his racist colleagues for a reason. But he also unafraid to call the slaughter in Vietnam what it is, and has opposed the lies and violence coming from Lyndon Johnson just as much as he's opposed the concept of racial progress.\n</p><p>He's vile. But he may just be good enough to get America out of Vietnam.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 62,
        "fields": {
            "first_name": "A.B.",
            "last_name": "Chandler",
            "election": 4,
            "party": "Democrat/Independent",
            "state": "Kentucky",
            "priority": 37,
            "description": "n/a",
            "color_hex": "#FF0000",
            "secondary_color_hex": "#FFA0A0",
            "is_active": 0,
            "image_url": "https://i.imgur.com/rDK8xUn.png",
            "electoral_victory_message": "n/a",
            "electoral_loss_message": "n/a",
            "no_electoral_majority_message": "n/a",
            "description_as_running_mate": "<p>He is <i>so</i> close to being perfect. He's not like the usual freaks. Chandler is a serious politician from a state open to the Wallace message, a former contender for the Presidency, reasonable conservative and race moderate. With your campaign appealing to firebombers of all kind, a man like Happy Chandler is a vital arm out to those hesitant about voting for a man like you.<p>But there's just one little hair in the soup - Jackie Robinson. Chandler, as Commissioner for the MLB, let Robinson play in White Leagues, and threatened to suspend players that tried to refuse to play against him. The fact Robinson would only grow more outspoken on civil rights makes Chandler's early support even more difficult to swallow.\n</p><p>If Chandler is chosen, your voters will feel betrayed. Worse still, so will your oil millionaire friends. But with the alternatives being Rockefeller and Kennedy, many in the campaign feel like now is the time for bold moves.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 63,
        "fields": {
            "first_name": "Curtis E.",
            "last_name": "LeMay",
            "election": 4,
            "party": "Republican/Independent",
            "state": "Ohio",
            "priority": 38,
            "description": "n/a",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://i.imgur.com/tMWVQJb.png",
            "electoral_victory_message": "n/a",
            "electoral_loss_message": "n/a",
            "no_electoral_majority_message": "n/a",
            "description_as_running_mate": "<p>If Chandler is too big of a risk, there's always the safe option, though he would bristle at the idea of being in any way \"safe\". General Curtis LeMay is another domestic moderate, although he's one who's never been tied to the forefront of a civil rights battle.\n</p><p>If Rockefeller and Kennedy want to make the election all about Vietnam, then it only makes sense to answer that with some policy of your own. In running with a military man, you would certainly be making any foreign policy statement a good deal more credible.\n</p><p>LeMay himself is concerned about his future income, but that's what oil millions are for. He won't be as instantly legitimatising as Chandler, but he won't be as controversial either - and sometimes, even you can be afraid of controversy.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    }
]

campaignTrail_temp.running_mate_json = [
    {
        "model": "campaign_trail.running_mate",
        "pk": 41,
        "fields": {
            "candidate": 25,
            "running_mate": 62
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 37,
        "fields": {
            "candidate": 24,
            "running_mate": 58
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 42,
        "fields": {
            "candidate": 25,
            "running_mate": 63
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 38,
        "fields": {
            "candidate": 24,
            "running_mate": 59
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 33,
        "fields": {
            "candidate": 23,
            "running_mate": 55
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 35,
        "fields": {
            "candidate": 23,
            "running_mate": 56
        }
    }
]

campaignTrail_temp.credits = "Halligan"

campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 1,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.12,
            "start_point": 0.94,
            "candidate_issue_weight": 10,
            "running_mate_issue_weight": 3,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.01,
            "state_variance": 0.005,
            "question_count": 25,
            "default_map_color_hex": "#C9C9C9",
            "no_state_map_color_hex": "#999999"
        }
    }
]

campaignTrail_temp.opponents_default_json = [
    {
        "election": 4,
        "candidates": [
            23,
            24,
            25
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 4,
        "candidates": [
            23,
            24,
            25
        ]
    }
]

campaignTrail_temp.temp_election_list = [
    {
        "id": 4,
        "year": 1968,
        "is_premium": 0,
        "display_year": "1968"
    }
]

jet_data = {
    "headerColor": "#700016",
    "windowColor": "#BFE6FF",
    "containerColor": "#FFFFFF",
    "innerWindowColor": "#E8FBFF",
    "bannerImageUrl": "https://campaigntrailshowcase.com/static/images/banners/banner_classic.png",
    "backgroundImageUrl": "https://coolbackgrounds.io/images/backgrounds/white/pure-white-background-85a2a7fd.jpg",
    "endingTextColor": "#000000",
    "customQuote": ""
}

//#startcode



nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#700016";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#BFE6FF";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

$(".container")[0].style.backgroundColor = "#FFFFFF";

document.getElementById("header").src = "https://campaigntrailshowcase.com/static/images/banners/banner_classic.png";

document.body.background = "https://coolbackgrounds.io/images/backgrounds/white/pure-white-background-85a2a7fd.jpg";

document.head.innerHTML += "<style>#results_container {color:#000000;} .inner_window_w_desc {background-color:#E8FBFF!important;}</style>";



$("#music_player")[0].children[0].style.display="none"
$("#music_player")[0].children[1].style.display="none"

document.getElementById("modLoadReveal").style.display="none"
document.getElementById("modloaddiv").style.display="none"

musicBox = document.getElementById("music_player")
musicBox.style.display=""

var trackSel;
e = campaignTrail_temp
e.selectedSoundtrack = 0

toTime = (seconds) => {
  var date = new Date(null);
  date.setSeconds(seconds);
  return date.toISOString().substr(11, 8);
}

generateTime = () => {
    // Get the audio element
    var audio = document.getElementById("campaigntrailmusic");

    timeTracker = document.createElement("div");
    timeTracker.style = `
      text-align:left;
      border-style:solid;
      border-width:3px;
      height:150px;
      width:200px;
      background-color:#999999;
      float:right;
      padding: 10px;
    `
    $("#trackSelParent")[0].prepend(timeTracker);
    $("#trackSelParent")[0].prepend(document.createElement("br"));

    // Create a new element to display the current position of the audio
    var positionDisplay = document.createElement("gg");
    positionDisplay.id = "position-display";

    // Create a new slider element to change the time
    var timeSlider = document.createElement("input");
    timeSlider.type = "range";
    timeSlider.min = 0;
    timeSlider.max = 1;
    timeSlider.step = 0.001;
    timeSlider.value = 0;
    timeSlider.style.width = "200px";
    timeSlider.id = "time-slider";

    var pausePlay = document.createElement("button");
    pausePlay.id = "position-display";
    pausePlay.innerHTML = "<b>Pause</b>"
    pausePlay.style.width = "100%";


    pausePlay.addEventListener("click", event => {
      event.preventDefault();
      updatePositionDisplay();
      let audio = document.getElementById("campaigntrailmusic");
      if (audio.paused) {
        audio.play();
        event.target.innerHTML = "<b>Pause</b>";
        return;
      }
      audio.pause();
      event.target.innerHTML = "<b>Play</b>";
      return;
    })

    var volumeLabel = document.createElement("gg");
    volumeLabel.id = "volume-label";
    volumeLabel.innerHTML = "<br><b>Volume: </b>"

    var volumeSlider = document.createElement("input");
    volumeSlider.type = "range";
    volumeSlider.min = 0;
    volumeSlider.max = 1;
    volumeSlider.step = 0.001;
    volumeSlider.value = 0;
    volumeSlider.style.width = "200px";
    volumeSlider.id = "volume-slider";

    volumeSlider.value = audio.volume;

    timeTracker.appendChild(pausePlay);
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(positionDisplay);
    timeTracker.appendChild(timeSlider);
    timeTracker.appendChild(volumeLabel);
    timeTracker.appendChild(volumeSlider);

    updatePositionDisplay();

    //for (let i = 0; i < 10; i++)
    //timeTracker.append(document.createElement("br"));


    // Function to update the position display
    function updatePositionDisplay() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
    }

    // Function to change the time of the audio
    function changeTime() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      audio.currentTime = timeSlider.value * audio.duration;
    }

    updateVolume = event => {
      audio.volume = event.target.value;
    }
    
    // Update the position display and slider every second
    setInterval(updatePositionDisplay, 1000);

    // Listen for changes to the time slider and change the time of the audio
    timeSlider.addEventListener("input", changeTime);
    volumeSlider.addEventListener("input", updateVolume)
}

function newMusicPlayer() {
  trackSel = document.createElement("div");
  trackSel.id = "trackSelParent"
  let z = `<br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#999999;float:right;">`
  z += `<b><select id='selectSoundtrack'><option value='`+soundtracks[e.selectedSoundtrack].name+`'>`+soundtracks[e.selectedSoundtrack].name+"</option>"
  for (i in soundtracks) {
    if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
      z += `<option value='`+soundtracks[i].name+`'>`+soundtracks[i].name+`</option>`
    }
  }
  z += `</select></b><br><br>`
  // <label><input type="radio" name="option" value="option1">Option 1</label><br>
  for (i in soundtracks[e.selectedSoundtrack].tracklist) {
    let a = soundtracks[e.selectedSoundtrack].tracklist[i]
    let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="`+i+`">`+a.name+`</label><br>`
    z += b
  }
  z += "</div><br><br>"
  trackSel.innerHTML = z

  // select correct song

  musicBox.appendChild(trackSel);
  Array.from(document.getElementById("trackSel").children).filter(f=>{
    return f.tagName == "LABEL"
  }).map(f=>f.children[0])[0].checked = true

  // set soundtrack changer

  soundtrackSelector = document.getElementById("selectSoundtrack")
  soundtrackSelector.onchange = function() {
    for (i in soundtracks) {
      if (soundtracks[i].name == soundtrackSelector.value) {
        e.selectedSoundtrack = i
        break
      }
    }
    document.getElementById("trackSelParent").remove()
    newMusicPlayer()
  }

  var matches = document.querySelectorAll('.trackSelector');

  for (match in matches) {
    matches[match].onchange = function() {
      musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
      musicBox.children[2].currentTime = 0
    }
  }

  musicBox.children[2].loop = false
  musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url

  musicBox.children[2].onended = function() {
    console.log("next track")
    let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
    let newSel = clamp(selected+1, soundtracks[e.selectedSoundtrack].tracklist.length-1, 0)
    let buttons = Array.from(document.getElementById("trackSel").children).filter(f=>{
      return f.tagName == "LABEL"
    }).map(f=>f.children[0])
    //let selectedIndex = buttons.map(f=>f.children[0]).map(f=>f.checked)
    buttons[newSel].click()
  }

  for (w = 0; w < 7; w++) {
    document.getElementById("trackSelParent").appendChild(document.createElement("br"))
  }
  
  generateTime();
}

clamp = function(a, max, min, overflow=true) {
  if (overflow) {
    return a > max ? min : a < min ? max : a;
  }
  return a > max ? max : a < min ? min : a;
}

// Track list

var soundtracks = {
 1: {
    name: "Black Robert",
    tracklist: [
      {
            "name": "The Actor - The Moody Blues",
            "url": "https://file.garden/Z7qfmQZIZjO_xV5N/SpotiDown.App%20-%20The%20Actor%20-%20The%20Moody%20Blues.mp3"
          },
          {
            "name": "SWLABR - Cream",
            "url": "https://file.garden/Z7qfmQZIZjO_xV5N/SWLABR%20%5Bl0QV71h-1b8%5D.mp3"
          },
          {
          "name": "Helter Skelter - The Beatles",
          "url": "https://file.garden/Z7qfmQZIZjO_xV5N/HelterSkelter.mp3"
          },
          {
          "name": "All Along the Watchtower - Jimi Hendrix",
          "url": "https://audio.jukehost.co.uk/H9boMg2Xqca8sfKuHEd5SPlVIHn4JD4q"
        },
        {
            "name": "The Crucifixion - Phil Ochs",
            "url": "https://file.garden/Z7qfmQZIZjO_xV5N/The%20Crucifixion.mp3"
      },
{
        name: "You Just Keep Me Hanging On - Vanilla Fudge",
        url: "https://audio.jukehost.co.uk/WGmrUmlLRTu0NEOWQxRdfaRCuaWi1eI4",
      },
{
        name: "Run Through the Jungle - Creedence Clearwater Revival",
        url: "https://files.catbox.moe/q3exrx.mp3",
      },


    ],
  },
 0: {
    name: "Intro",
    tracklist: [
      {
        name: "The Sidewalks of New York - Nat King Cole",
        url: "https://audio.jukehost.co.uk/qiFrM1ePjFG7Ok78XoMW9A16lsQZxfyL",

      },

    ],

  },

  2: {
    name: "Rocky Can Win",
    tracklist: [
      {
        name: "Build Me Up Buttercup - The Foundations",
        url: "https://file.garden/Z7qfmQZIZjO_xV5N/BuildMeUp.mp3",
      },
      {
        name: "Get Ready - The Temptations",
        url: "https://audio.jukehost.co.uk/5DzqqdgNF5t84QmBbE2Gcbz90aQ3KaA7",
      },
      {
        name: "Politics and Poker - Howard da Silva",
        url: "https://file.garden/Z7qfmQZIZjO_xV5N/SpotiDownloader.com%20-%20Politics%20And%20Poker%20-%20Fiorello!%20-%20Original%20Broadway%20Cast.mp3",
      },
      {
        name: "Daydream Believer - The Monkees",
        url: "https://file.garden/Z7qfmQZIZjO_xV5N/DaydreamBeliever.mp3",
      },
      {
        name: "Suspicious Minds - Elvis Presley",
        url: "https://audio.jukehost.co.uk/lqXJUWns3slGkiBoNLdvJ1fC20jaGOzq",
      },
      {
          "name": "Spirit in the Sky - Norman Greenbaum",
          "url": "https://audio.jukehost.co.uk/RdySJdzjpBGep8j3O2T4kYdpjuWM3VlC"
      },
      {
        name: "I Will Take You There - Harry Nilsson",
        url: "https://file.garden/Z7qfmQZIZjO_xV5N/SpotiDown.App%20-%20I%20Will%20Take%20You%20There%20-%20Harry%20Nilsson.mp3",
      },
    ],
},
3: {
    name: "Now, Tomorrow, & Forever",
    tracklist: [
      {
        name: "The Race is On - George Jones",
        url: "https://file.garden/Z7qfmQZIZjO_xV5N/SpotiDown.App%20-%20The%20Race%20Is%20On%20-%20George%20Jones.mp3",
      },
      {
        name: "Dirty Old Egg-Suckin' Dog - Johnny Cash",
        url: "https://file.garden/Z7qfmQZIZjO_xV5N/SpotiDown.App%20-%20Dirty%20Old%20Egg-Suckin_%20Dog%20-%20Live%20at%20Folsom%20State%20Prison_%20Folsom_%20CA%20_1st%20Show_%20-%20January%201968%20-%20Johnny%20Cash.mp3",
      },
      {
        name: "Alabama Jubilee -  Doc Watson",
        url: "https://file.garden/Z7qfmQZIZjO_xV5N/SpotiDown.App%20-%20Alabama%20Jubilee%20-%20Doc%20Watson.mp3",
      },
      {
        name: "Oh! Susanna -  The Byrds",
        url: "https://file.garden/Z7qfmQZIZjO_xV5N/Oh%20Susannah.mp3",
      },
      {
        name: "Silver Rails - Hank Snow",
        url: "https://file.garden/Z7qfmQZIZjO_xV5N/Silver%20Rails%20%20Hank%20Snow%20(1970).mp3",
      },
      {
        name: "The Weight - The Band",
        url: "https://audio.jukehost.co.uk/bv19Vu2KR6reJo93UZLB5OtkJtuDgNo1",
      },
      {
        name: "Wichita Lineman - Glen Campbell",
        url: "https://file.garden/Z7qfmQZIZjO_xV5N/SpotiDown.App%20-%20Wichita%20Lineman%20-%20Remastered%202001%20-%20Glen%20Campbell.mp3",
      },
    ],
  },
}


newMusicPlayer()

 var changeGameDisp2 = (hide) => {
  disp = "";
  if (hide) {
    disp = "none";
  }
  document.getElementsByClassName("below_header")[0].style.display = disp
     document.getElementById("bottomBar").style.display = disp
};

e.trailerPage = () => {
  credits_html = `
  <video id='midnight_video' src='https://cdn.discordapp.com/attachments/932087077472993350/1091951781346562158/In_Game_Ads.mp4' width=350></video>
  `
$("#music_player")[0].style.display="none"
$("audio")[0].pause()
  changeGameDisp2(true);
    changeGameDisp2(true);
    var menuHeader = document.createElement("div");
    menuHeader.classList.add("inner_window_front");
    menuHeader.innerHTML = `<h1 style="position:relative;top:-5px;"><font color='white'>Itâ€™s Midnight In America</font></h1>`;
    menuHeader.id = "SOTUheader";
    menuHeader.style = "height: 50px;background-color:black";
    var newMenu = document.createElement("div");
    newMenu.classList.add("inner_window_front");
    newMenu.id = "SOTUmenu";
    newMenu.style = `height:260px;background-color:black;color:white;`;

    newMenu.innerHTML = credits_html;
    let z = document.getElementById("game_window");
    var backButton = document.createElement("button");
    backButton.style =
      "position: relative; bottom: -13px; left: -380px; width: 150px; height: 80px;font-size:40px;padding-top:5px;padding-left:8px";
    backButton.id = "backSOTUBtn";
    backButton.innerHTML = `<b>BACK</b>`;
    backButton.onclick = function () {
      document.getElementById("SOTUheader").remove();
      document.getElementById("SOTUmenu").remove();
      document.getElementById("backSOTUBtn").remove();
      changeGameDisp2(false);
$("#music_player")[0].style.display=""

    };
    z.appendChild(menuHeader);
    z.appendChild(newMenu);
    z.appendChild(backButton);
    $("#midnight_video")[0].play()



}

let bBar = $("#bottomBar")[0]
let bBarC = Array.from(bBar.children)

for (i in bBarC) {
    bBarC[i].remove()
}

let trailer = document.createElement("button")
trailer.style = `position: absolute; left: 10px; top: 5px;width:200px;height:47px;font-size:150%;text-align:center;background-color:black;color:white;`
trailer.innerHTML = "<b>Midnight</b>"
trailer.id="trailer_button"
trailer.onclick=e.trailerPage;

bBar.appendChild(trailer)

let buttonStyle = document.createElement("style")
buttonStyle.innerHTML = `
#trailer_button:hover {
    background-color: #212121 !important;
}
`
document.body.appendChild(buttonStyle)


//#endcode
